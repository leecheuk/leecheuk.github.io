webpackJsonp([1],{"/FmM":function(e,t,n){"use strict";(function(e){t.a={props:["sc","i","onClickLine"],mounted:function(){e("code")}}}).call(t,n("7t+N"))},"1RHX":function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.488.488 0 0 0 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"}})])},toString:function(){return"/Users/m/Desktop/folder/VueJs/code-editor/src/assets/svg/edit-folder.svg"}}},"6mii":function(e,t){},AFnI:function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}})])},toString:function(){return"/Users/m/Desktop/folder/VueJs/code-editor/src/assets/svg/fullscreen-exit.svg"}}},BRqs:function(e,t){},"E+7F":function(e,t){},GPr1:function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"}})])},toString:function(){return"/Users/m/Desktop/folder/VueJs/code-editor/src/assets/svg/delete-folder.svg"}}},K510:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAO0lEQVRYw+3XwQkAMAwDsey/tLtDWkigMtxfX1eSmux6LwBpBgDQCgAAAAAAAAAAYCVg9piMXzOA7wEHeHCxo0S8KWkAAAAASUVORK5CYII="},"KXy+":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAeklEQVRYw+3XMQqAMAwF0JxU7+Gi4OBdu/QIsYJTLYUfYqzwhz+m/y2BRlRVvowMC1j2YypJJQpm9QJkQzmM6AHQ0s2CcAPcMzDCFWBBuANQxCuAFiIcUCMitgAGEkAAAQQQQMDwgOwISBbAbPyWP8qvt/53mBBAQFROJuwV45GAye8AAAAASUVORK5CYII="},Kp3u:function(e,t){},MYFP:function(e,t){},N32f:function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z"}})])},toString:function(){return"/Users/m/Desktop/folder/VueJs/code-editor/src/assets/svg/add-file.svg"}}},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App",created:function(){this.$store.dispatch("loadFiles")}},r,!1,function(e){n("MYFP")},null,null).exports,o=n("/ocq"),c=n("VMnz"),a=n.n(c),l=n("AFnI"),u=n.n(l),d={props:["onClickFullscreen","fullscreen"],components:{Fullscreen:a.a,FullscreenExit:u.a},computed:{file:function(){return this.$store.getters.getCurrentFile},title:function(){return this.file?this.file.getFilename()+" - "+this.file.getLocation():"Visual Lime"}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"top-bar"},[n("div",{staticClass:"top-max-btn",on:{click:e.onClickFullscreen}},[e.fullscreen?e._e():n("Fullscreen",{staticClass:"icon",attrs:{viewBox:"0 0 25 25",height:"50",width:"50"}}),e._v(" "),e.fullscreen?n("FullscreenExit",{staticClass:"icon",attrs:{viewBox:"0 0 25 25",height:"50",width:"50"}}):e._e()],1),e._v(" "),n("div",{staticClass:"top-bar-title"},[e._v(e._s(e.title))])])},staticRenderFns:[]};var f=n("VU/8")(d,h,!1,function(e){n("t8Mk")},null,null).exports,g=(n("6mii"),n("/FmM")),v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.sc,expression:"sc"}],staticClass:"code-editor-line",attrs:{id:"codeLineEdit"},on:{click:function(t){return e.onClickLine(t,e.i)}}},[e._v("  "),n("code",{ref:"codeLineEdit",staticClass:"javascript"},[e._v("\n  ")]),e._v("\n")])},staticRenderFns:[]},m={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"placeholder"},[this._v("\n  Go open/create a file!\n")])},staticRenderFns:[]};var p={props:["disable"],components:{CodeEditorLine:n("VU/8")(g.a,v,!1,null,null,null).exports,Placeholder:n("VU/8")({},m,!1,function(e){n("E+7F")},null,null).exports},data:function(){return{cursorTop:0,cursorLeft:0,currentLine:0,currentLineChar:0,latency:1,shiftPressed:!1,ctrlPressed:!1,cmdPressed:!1,disableInput:!1,showCursor:!1,keyCode:{left:37,right:39,down:40,up:38,backspace:8,deletecode:46,forwardslash:191,openbracket:219,closebracket:221,space:32,enter:13,tab:9,shift:16,ctrl:17},alphaCode:[65,90],numCode:[48,57],numpadCode:[96,105],symbolCode1:[106,107,109,110,111],symbolCode2:[186,192],symbolCode3:[219,222],cmd:[91,93,224],selectionStart:{line:0,char:0},selectionEnd:{line:0,char:0},html:!1,start:0,end:0,highlighting:!1,highlightStartLine:null,highlightEndLine:null,selection:[],currentHighlightLine:null,debug:!1,lineHeight:33}},mounted:function(){var e=this;window.onkeyup=function(t){if(!e.disable){var n=t.keyCode;[17,91,93,224].indexOf(n)>-1&&(e.cmdPressed=!1,e.ctrlPressed=!1),n==e.keyCode.shift&&(e.shiftPressed=!1)}},window.onkeydown=function(t){if(!e.disable){e.repositionPage(),console.log(t.keyCode);var n=t.keyCode,i=e.keyCode,r=i.left,s=i.right,o=i.down,c=i.up,a=i.enter,l=i.backspace,u=i.deletecode,d=i.shift,h=i.tab,f=i.ctrl,g=i.openbracket,v=i.closebracket,m=i.forwardslash;e.$store.getters.getContentLineLength;switch(n){case f:e.ctrlPressed=!0;break;case 91:case 93:case 224:e.cmdPressed=!0;break;case g:t.preventDefault(),t.stopPropagation(),e.cmdPressed||e.ctrlPressed||!e.isText(n)?(e.cmdPressed||e.ctrlPressed)&&e.unindentLine():e.insertText(t.key);break;case v:t.preventDefault(),t.stopPropagation(),e.cmdPressed||e.ctrlPressed||!e.isText(n)?(e.cmdPressed||e.ctrlPressed)&&e.indentLine():e.insertText(t.key);break;case m:e.cmdPressed||e.ctrlPressed?e.commentLine():e.insertText(t.key);break;case h:t.preventDefault(),e.tabLine();break;case d:e.shiftPressed=!0;break;case l:case u:t.preventDefault(),t.stopPropagation(),e.removeText();break;case r:e.navigateLeft();break;case s:e.navigateRight();break;case c:e.navigateUp();break;case o:e.navigateDown();break;case a:e.newLine();break;default:e.isText(n)&&e.insertText(t.key)}e.repositionCursor()}}},methods:{isText:function(e){var t=this.inRange(e,this.alphaCode),n=this.inRange(e,this.numCode)||this.inRange(e,this.numpadCode),i=this.symbolCode1.indexOf(e)>-1||this.inRange(e,this.symbolCode2)||this.inRange(e,this.symbolCode3),r=e==this.keyCode.space;return t||n||i||r},inRange:function(e,t){var n=t[0],i=t[1];return e>=n&&e<=i},insertText:function(e){var t=this.getCurrentLine();t?this.setCurrentLine(t.slice(0,this.currentLineChar)+e+t.slice(this.currentLineChar)):this.setCurrentLine(e),this.currentLineChar+=1},removeText:function(){var e=this.getCurrentLine();this.currentLineChar>0?(this.setCurrentLine(e.slice(0,this.currentLineChar-1)+e.slice(this.currentLineChar)),this.currentLineChar-=1):0==this.currentLineChar&&this.mergeLine()},navigateLeft:function(){this.getCurrentLine();this.currentLineChar>0?this.currentLineChar-=1:this.navigateUp("end")},navigateRight:function(){var e=this.$store.getters.getContentLineLength(this.currentLine);this.currentLineChar<e?this.currentLineChar+=1:this.navigateDown("start")},navigateUp:function(e){if(this.currentLine>0){this.currentLine-=1;var t=this.$store.getters.getContentLineLength(this.currentLine);this.currentLineChar="end"!=e?Math.min(this.currentLineChar,t):t,this.scrollUp()}},navigateDown:function(e){var t=this.getLinesCount();if(this.currentLine<t-1){this.currentLine+=1;var n=this.$store.getters.getContentLineLength(this.currentLine);this.currentLineChar="start"!=e?Math.min(this.currentLineChar,n):0,this.scrollDown()}},newLine:function(){var e=this.getCurrentLine();if(e){var t=e.slice(0,this.currentLineChar),n=e.slice(this.currentLineChar);this.insertLine(this.currentLine+1,n),this.setCurrentLine(t),this.currentLine+=1,this.currentLineChar=0}else this.insertLine(this.currentLine+1,""),this.currentLine+=1,this.currentLineChar=0;this.scrollDown()},mergeLine:function(){if(this.currentLine>0){this.currentLine-=1,this.currentLineChar=this.$store.getters.getContentLineLength(this.currentLine);var e=this.getCurrentLine()+this.getLine(this.currentLine+1);this.setCurrentLine(e),this.removeLine(this.currentLine+1)}this.repositionPage()},commentLine:function(){if(this.cmdPressed||this.ctrlPressed){var e=this.getCurrentLine();if(e){var t=e.includes("//")?e.replace(/^\/\/\s/,""):"// "+e;this.setCurrentLine(t),this.currentLineChar=e.includes("//")?this.currentLineChar-3:this.currentLineChar+3}else this.setCurrentLine("// "),this.currentLineChar+=3}},tabLine:function(){var e=this.getCurrentLine(),t=e.slice(0,this.currentLineChar)+"  "+e.slice(this.currentLineChar);this.setCurrentLine(t),this.currentLineChar+=2},indentLine:function(){if(this.cmdPressed||this.ctrlPressed){var e=this.getCurrentLine();this.setCurrentLine("  "+e),this.currentLineChar+=2}},unindentLine:function(){var e=this.getCurrentLine();(this.cmdPressed||this.ctrlPressed)&&/^\s{2}/.test(e)&&(this.setCurrentLine(e.replace(/^\s{2}/,"")),this.currentLineChar-=2)},onClickEditor:function(){},onClickLine:function(e,t){},onMouseUp:function(e,t){},onMouseDown:function(e,t){this.currentLine=t;var n=this.$store.getters.getContentLineLength(this.currentLine);this.currentLineChar=Math.min(Math.floor(e.offsetX/8),n),this.repositionCursor()},onEnterHoverLine:function(e,t){if(this.highlight){console.log("highlighting & hovering");for(var n=0;n<this.source.length;n++);}},onHoverLine:function(e,t){this.highlighting&&(this.source[t].hl=!0,this.source[t].hlEnd=Math.floor(e.offsetX/8),console.log("hovering",Math.floor(e.offsetX/8)),this.currentLine=t,this.currentLineChar=Math.min(Math.floor(e.offsetX/8),this.getCurrentLine().length),this.repositionCursor())},onLeaveHoverLine:function(e,t){this.highlighting&&(this.source[t].hlEnd=this.getCurrentLine().length)},getCurrentLine:function(){return this.$store.getters.getContentLine(this.currentLine)},getLine:function(e){return this.$store.getters.getContentLine(e)},getLinesCount:function(){return this.$store.getters.getContentLength},setCurrentLine:function(e){this.$store.dispatch("editLine",{indx:this.currentLine,str:e})},insertLine:function(e,t){this.$store.dispatch("insertLine",{indx:e,str:t})},removeLine:function(e){this.$store.dispatch("removeLine",e)},repositionCursor:function(){var e=this;setTimeout(function(){e.cursorLeft=e.$refs.currentLine.offsetWidth-2.6,e.cursorTop=(e.$refs.currentLine.offsetHeight+.19)*e.currentLine,e.disableInput=!1},e.latency)},repositionPage:function(){var e=this;setTimeout(function(){var t=e.$refs.cursor.getBoundingClientRect().y,n=e.$refs.codeEditorContainer.offsetHeight;(t<54||t>n)&&(e.$refs.codeEditorContainer.scrollTop=(e.$refs.currentLine.offsetHeight+.19)*e.currentLine)},e.latency+1)},scrollUp:function(){var e=this;setTimeout(function(){var t=e.$refs.cursor.getBoundingClientRect().y;e.$refs.codeEditorContainer.offsetHeight;t>53&&t<58&&(e.$refs.codeEditorContainer.scrollTop-=25.19)},e.latency+1)},scrollDown:function(){var e=this;setTimeout(function(){e.$refs.cursor.getBoundingClientRect().y>e.$refs.codeEditorContainer.offsetHeight+25.19&&(e.$refs.codeEditorContainer.scrollTop+=25.19)},e.latency+1)}},computed:{currentString:function(){var e=this.getCurrentLine();return e?e.slice(0,this.currentLineChar):""},width:function(){return this.$refs.currentLine?this.$refs.currentLine.offsetWidth-2.6:0},contentLength:function(){return this.$store.getters.getContentLength},file:function(){var e=this.$store.getters.getCurrentFile;return e},source:function(){return this.$store.getters.getContent}},watch:{file:function(e){return this.currentLine=0,this.currentLineChar=0,this.repositionCursor(),e}}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"codeEditorContainer",staticClass:"code-editor-container"},[n("div",{staticClass:"code-editor-line"},e._l(e.contentLength,function(t){return n("div",{staticClass:"code-line"},[e._v(e._s(t))])})),e._v(" "),e.file?n("div",{staticClass:"code-editor",attrs:{refs:"codeEditor"},on:{click:e.onClickEditor}},[e._l(e.source,function(t,i){return n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:t,expression:"sc"}],staticClass:"code-editor-line",attrs:{id:"codeLineEdit"},on:{click:function(t){return e.onClickLine(t,i)},mouseup:function(t){return e.onMouseUp(t,i)},mousedown:function(t){return e.onMouseDown(t,i)}}},[e._v("        "),n("code",{ref:"codeLineEdit",refInFor:!0,staticClass:"javascript"},[e._v("\n        ")]),e._v("\n    ")])}),e._v(" "),n("div",{ref:"cursor",staticClass:"cursor",style:{top:e.cursorTop+"px",left:e.cursorLeft+"px"}}),e._v(" "),e.debug?n("span",[e._v("disabled: "+e._s(e.disableInput?"true":"false")+"; "+e._s(e.currentLine)+", "+e._s(e.currentLineChar)+"; hl: "+e._s(e.selectionStart)+" "+e._s(e.selectionEnd))]):e._e(),e._v(" "),n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.currentString,expression:"currentString"}],ref:"currentLine",staticClass:"code-editor-line code-editor-string",attrs:{id:"codeLine"}},[e._v("        "),n("code",{staticClass:"javascript"},[e._v("\n        ")]),e._v("\n      ")])],2):e._e(),e._v(" "),e.file?e._e():n("Placeholder")],1)},staticRenderFns:[]};var F=n("VU/8")(p,C,!1,function(e){n("S0yu")},null,null).exports,L={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabs-bar"},[n("div",{staticClass:"tab-nav"},[n("div",{staticClass:"tab-left",on:{click:e.onNavLeft}},[e._v("<")]),e._v(" "),n("div",{staticClass:"tab-right",on:{click:e.onNavRight}},[e._v(">")])]),e._v(" "),e._l(e.currentFiles,function(t,i){return n("div",{staticClass:"tab",class:{"tab-active":i==e.activeTab}},[n("span",{staticClass:"tab-name",on:{click:function(t){e.onClickTab(i)}}},[e._v(e._s(t.getFilename()))]),e._v(" "),n("span",{staticClass:"tab-close",on:{click:function(t){e.onRemoveTab(i)}}},[e._v("×")])])})],2)},staticRenderFns:[]};var _=n("VU/8")({data:function(){return{activeTab:0}},methods:{onClickTab:function(e){this.activeTab=e;var t=this.$store.state.filesystem.currentFiles;this.$store.dispatch("setCurrentFileId",t[e].getId())},onRemoveTab:function(e){var t=this.$store.state.filesystem.currentFiles;this.$store.dispatch("closeFile",t[e].getId())},onNavLeft:function(){if(this.activeTab>0){this.activeTab-=1;var e=this.$store.state.filesystem.currentFiles;this.$store.dispatch("setCurrentFileId",e[this.activeTab].getId())}},onNavRight:function(){if(this.activeTab<this.files.length-1){this.activeTab+=1;var e=this.$store.state.filesystem.currentFiles;this.$store.dispatch("setCurrentFileId",e[this.activeTab].getId())}}},computed:{currentFiles:function(){return this.$store.state.filesystem.currentFiles},currentFileId:function(){return this.$store.state.filesystem.currentFileId}},watch:{currentFileId:function(e){var t=this.currentFiles.map(function(e){return e.getId()});this.activeTab=t.indexOf(e)}}},L,!1,function(e){n("ieEG")},null,null).exports,w=n("Zrlr"),A=n.n(w),b=n("wxAW"),k=n.n(b),x=function(){function e(t){if(A()(this,e),"string"==typeof t){var n=t.split("/"),i=n.slice(0,n.length-1).join("/"),r=n[n.length-1];this._id=Math.random().toString(36).substring(2),this._name=r,this._location="/"!=i[0]?"/"+i:i,this._files=[]}else{var s=t._id,o=t._name,c=t._location,a=t._files;this._id=s,this._name=o,this._location=c,this._files=a}}return k()(e,[{key:"getId",value:function(){return this._id}},{key:"getFilename",value:function(){return this._name}},{key:"getLocation",value:function(){return this._location}},{key:"getFiles",value:function(){return this._files}},{key:"getFullLocation",value:function(){return"/"!=this._location?this._location+"/"+this._name:this._location+this._name}},{key:"setName",value:function(e){this._name=e}},{key:"setFiles",value:function(e){this._files=e}},{key:"addFile",value:function(e){this._files.push(e)}},{key:"removeFile",value:function(e){this._files=this._files.filter(function(t){return t!=e})}}]),e}(),y=n("N32f"),M=n.n(y),I=n("VD6W"),E=n.n(I),$=n("1RHX"),B=n.n($),S=n("K510"),R=n.n(S),P=n("ussS"),T=n.n(P),D=n("KXy+"),z=n.n(D),V=n("GPr1"),H={name:"FolderItem",props:["file","editMode"],components:{DeleteFolder:n.n(V).a},data:function(){return{activeFile:!1,showSubfiles:!1}},methods:{onClickFile:function(){this.file instanceof x?this.showSubfiles=!this.showSubfiles:this.editMode||this.$store.dispatch("readFile",this.file.getId())},onRemoveFile:function(){this.$store.dispatch("removeFile",this.file.getId())},getFile:function(e){return this.$store.getters.getSubfile(e)},isFolder:function(){return this.file instanceof x}},computed:{subfiles:function(){var e=this;return this.isFolder()?this.file.getFiles().map(function(t){return e.getFile(t)}):[]},paddingLeft:function(){return 15*(this.file.getLocation().split("/").filter(function(e){return""!=e}).length+1)+"px"},iconImg:function(){var e=this.showSubfiles?T.a:R.a;return this.isFolder()?e:z.a}}},U={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"files"},[n("li",{staticClass:"folders-item",style:{paddingLeft:e.paddingLeft},on:{click:e.onClickFile}},[e.editMode?e._e():n("img",{staticClass:"file-img",attrs:{src:e.iconImg}}),e._v(" "),e.editMode?n("DeleteFolder",{staticClass:"icon",attrs:{viewBox:"0 0 25 25",height:"50",width:"50"},nativeOn:{click:function(t){return e.onRemoveFile(t)}}}):e._e(),e._v(" "),n("div",{staticClass:"folders-item-name"},[e._v(e._s(e.file.getFilename()))])],1),e._v(" "),e._l(e.subfiles,function(t){return e.showSubfiles&&e.subfiles.length>0&&t.getLocation()==e.file.getFullLocation()?n("FolderItem",{attrs:{file:t,editMode:e.editMode}}):e._e()})],2)},staticRenderFns:[]};var N=n("VU/8")(H,U,!1,function(e){n("eJEf")},null,null).exports,O={props:["toggleModal"],components:{AddFile:M.a,AddFolder:E.a,FolderItem:N,EditFolder:B.a},data:function(){return{editMode:!1}},methods:{onAddFile:function(){this.toggleModal("file")},onAddFolder:function(){this.toggleModal("folder")},checkClass:function(e){return e instanceof x},onClickEdit:function(){this.editMode=!this.editMode}},computed:{files:function(){return this.$store.state.filesystem.files}}},Q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"folders-container"},[n("h5",{staticClass:"folders-title"},[n("span",{staticClass:"folders-title-name"},[e._v("\n      Folders\n    ")]),e._v(" "),e.editMode?e._e():n("span",{staticClass:"folders-title-btns"},[n("AddFile",{staticClass:"icon",attrs:{viewBox:"0 0 25 25",height:"50",width:"50"},nativeOn:{click:function(t){return e.onAddFile(t)}}}),e._v(" "),n("AddFolder",{staticClass:"icon",attrs:{viewBox:"0 0 25 25",height:"50",width:"50"},nativeOn:{click:function(t){return e.onAddFolder(t)}}})],1),e._v(" "),e.editMode?n("span",{staticClass:"folders-edit-dismiss",on:{click:e.onClickEdit}},[e._v("\n      Done\n    ")]):e._e()]),e._v(" "),0==e.files.length?n("div",{staticClass:"folders-placeholder"},[e._v("\n    No files yet\n  ")]):e._e(),e._v(" "),n("ul",{staticClass:"folders"},e._l(e.files,function(t){return t&&"/"==t.getLocation()?n("FolderItem",{attrs:{file:t,editMode:e.editMode}}):e._e()})),e._v(" "),n("div",{staticClass:"settings-btn"},[n("EditFolder",{staticClass:"icon",attrs:{viewBox:"0 0 25 25",height:"50",width:"50"},nativeOn:{click:function(t){return e.onClickEdit(t)}}})],1)])},staticRenderFns:[]};var j={props:["disable","toggleModal"],components:{CodeEditor:F,TabsBar:_,Folders:n("VU/8")(O,Q,!1,function(e){n("c76p")},null,null).exports},data:function(){return{resize:!1}},mounted:function(){navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(this.resize=!0)}},Y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"editor-content",class:{resize:this.resize}},[t("div",{staticClass:"editor-left"},[t("Folders",{attrs:{toggleModal:this.toggleModal}})],1),this._v(" "),t("div",{staticClass:"editor-middle"},[t("TabsBar"),this._v(" "),t("CodeEditor",{attrs:{disable:this.disable}})],1)])},staticRenderFns:[]};var K=n("VU/8")(j,Y,!1,function(e){n("Kp3u")},null,null).exports,J=function(){function e(t){if(A()(this,e),"string"==typeof t){var n=t.split("/"),i=n.slice(0,n.length-1).join("/"),r=n[n.length-1],s=r.split(".")[1];this._id=Math.random().toString(36).substring(2),this._name=r.split(".")[0],this._location="/"!=i[0]?"/"+i:i,this._extension=s||"",this._content=[""]}else{var o=t._id,c=t._name,a=t._location,l=t._extension,u=t._content;this._id=o,this._name=c,this._location=a,this._extension=l,this._content=u}}return k()(e,[{key:"getId",value:function(){return this._id}},{key:"getName",value:function(){return this._name}},{key:"getFilename",value:function(){return""!=this._extension?this._name+"."+this._extension:this._name}},{key:"getLocation",value:function(){return this._location}},{key:"getContent",value:function(){return this._content}},{key:"setName",value:function(e){this._name=e}},{key:"saveContent",value:function(e){this._content=e}}]),e}(),q={props:["toggleModal","mode"],data:function(){return{input:"",showSubmitBtn:!1,error:void 0,disable:!1}},created:function(){this.input=this.$store.state.filesystem.currentPath},mounted:function(){this.$refs.modalInput.focus()},methods:{onTyping:function(){this.error=void 0;var e="file"==this.mode?new J(this.input):new x(this.input),t=this.$store.getters.validName(e);t||(this.error="The "+this.mode+" name already exist.",this.disable=!0),""!=this.input&&t?(this.disable=!1,this.showSubmitBtn=!0):this.showSubmitBtn=!1},onCreate:function(){if(!this.disable){switch(this.mode){case"file":var e=new J(this.input);this.$store.dispatch("createFile",e);break;case"folder":var t=new x(this.input);this.$store.dispatch("createFile",t)}this.toggleModal()}}},watch:{"$store.state.filesystem.currentPath":function(e){this.input=e}}},X={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-container"},[n("div",{directives:[{name:"on-click-outside",rawName:"v-on-click-outside",value:e.toggleModal,expression:"toggleModal"}],staticClass:"modal"},[n("div",{staticClass:"modal-title"},[n("span",{staticClass:"modal-title-text"},[e._v("Create "+e._s(e.mode))]),e._v(" "),n("span",{staticClass:"modal-dismiss",on:{click:e.toggleModal}},[e._v("×")])]),e._v(" "),n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-input-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],ref:"modalInput",staticClass:"modal-input",attrs:{type:"text",placeholder:"/path/to/"+e.mode},domProps:{value:e.input},on:{keyup:[function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.onCreate(t):null},e.onTyping],input:function(t){t.target.composing||(e.input=t.target.value)}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showSubmitBtn,expression:"showSubmitBtn"}],staticClass:"modal-submit",on:{click:e.onCreate}},[e._v("+")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"modal-input-error"},[e._v("\n        "+e._s(e.error)+"\n      ")])])])])},staticRenderFns:[]};var G={components:{TopBar:f,Editor:K,FormModal:n("VU/8")(q,X,!1,function(e){n("Zpd7")},null,null).exports},data:function(){return{showModal:!1,mode:"file",fullscreen:!1,resize:!1}},methods:{toggleModal:function(e){this.showModal=!this.showModal,this.mode=e||"file"},onClickFullscreen:function(){var e=document.getElementById("editorWindow");this.fullscreen?this.launchIntoFullscreen(e):this.exitFullscreen(e),this.fullscreen=!this.fullscreen},launchIntoFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullscreen:function(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}}},W={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor-container",attrs:{id:"editorWindow"}},[n("TopBar",{attrs:{onClickFullscreen:e.onClickFullscreen,fullscreen:e.fullscreen}}),e._v(" "),n("Editor",{attrs:{disable:e.showModal,toggleModal:e.toggleModal}}),e._v(" "),e.showModal?n("FormModal",{attrs:{toggleModal:e.toggleModal,mode:e.mode}}):e._e()],1)},staticRenderFns:[]};var Z=n("VU/8")(G,W,!1,function(e){n("BRqs")},null,null).exports;i.a.use(o.a);var ee,te=new o.a({routes:[{path:"/",name:"Editor",component:Z},{path:"/v2",name:"CodeEditor_div",component:F}]}),ne=n("5CJf"),ie=n.n(ne),re=n("YccO"),se=n("NYxO"),oe=n("//Fk"),ce=n.n(oe),ae=window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.indexedDB;window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,ae||window.alert("Your browser doesn't support a stable version of IndexedDB.");var le={loadDB:function(){var e=ae.open("database");e.onerror=function(e){console.log(e.target.error)},e.onupgradeneeded=function(e){ee=e.target.result;e.target.transaction;ee.createObjectStore("files",{keyPath:"_id"}).transaction.oncomplete=function(e){ee.transaction(["files"]).objectStore("files"),le.getData().then(function(e){ve.dispatch("setFiles",e)})}},e.onsuccess=function(e){ee=e.target.result,ee.transaction(["files"]).objectStore("files").transaction.oncomplete=function(e){le.getData().then(function(e){ve.dispatch("setFiles",e)})}}},getData:function(){var e=[],t=ee.transaction(["files"]).objectStore("files");return new ce.a(function(n,i){var r=t.openCursor();r.onsuccess=function(t){var i=t.target.result;if(i){var r=void 0;r=i.value._extension?new J(i.value):new x(i.value),e.push(r),i.continue()}else n(e)},r.onerror=function(e){i("error getting data")}})},addFile:function(e){var t=ee.transaction(["files"],"readwrite").objectStore("files").add(e);t.onsuccess=function(e){console.log("success")},t.onerror=function(e){console.log("error")}},updateFile:function(e){var t=ee.transaction(["files"],"readwrite").objectStore("files"),n=t.get(e.getId());n.onsuccess=function(n){var i=n.target.result;i=e;var r=t.put(i);r.onerror=function(e){console.log("error")},r.onsuccess=function(e){console.log("success")}},n.onerror=function(e){console.log("error")}},removeFile:function(e){var t=ee.transaction(["files"],"readwrite").objectStore("files").delete(e);t.onsuccess=function(e){console.log("success")},t.onerror=function(e){console.log("error")}}},ue=le,de={sortByName:function(e,t){var n=e.getFilename(),i=t.getFilename();return n<i?-1:n>i?1:0}},he={getSubfile:function(e){return function(t){var n=e.files.filter(function(e){return e.getId()==t});return 1==n.length?n[0]:null}},validName:function(e){return function(t){return 0==e.files.filter(function(e){return e.constructor===t.constructor&&e.getLocation()==t.getLocation()&&e.getFilename()==t.getFilename()}).length}},getCurrentFile:function(e,t){if(0==e.currentFiles.length)return null;var n=e.currentFiles.filter(function(t){return t.getId()==e.currentFileId});return 1==n.length?n[0]:e.currentFiles[0]},getContentLength:function(e,t){var n=t.getCurrentFile;return n?n.getContent().length:0},getContentLine:function(e,t){return function(e){var n=t.getCurrentFile;return n?n.getContent()[e]:null}},getContentLineLength:function(e,t){return function(e){var n=t.getCurrentFile;return n?n.getContent()[e].length:0}},getContent:function(e,t){var n=t.getCurrentFile;return n?n.getContent():[]},sortSubfileIds:function(e,t){return function(n){var i=n.map(function(n){return t.getSubfile(e)(n)}).filter(function(e){return null!=e});return i.sort(de.sortByName),i.map(function(e){return e.getId()})}}},fe={loadFiles:function(e){ue.loadDB()},setFiles:function(e,t){t.sort(de.sortByName),e.files=t},createFile:function(e,t){if(t){e.files.push(t),e.files.sort(de.sortByName);t.getLocation();var n=e.files.filter(function(e){return e instanceof x&&t.getLocation()==e.getFullLocation()});if(1==n.length){var i=n[0];i.addFile(t.getId()),i.setFiles(he.sortSubfileIds(e,he)(i.getFiles())),ue.updateFile(n[0])}else{var r=new x(t.getLocation());""!==r.getFilename()&&(r.addFile(t.getId()),fe.createFile(e,r))}ue.addFile(t)}},removeFile:function(e,t){var n=e.files.filter(function(e){return e._id==t}),i=e.files.filter(function(e){return e instanceof x&&n[0].getLocation()==e.getFullLocation()});if(i.length>0&&(i[0].removeFile(t),i[0].setFiles(he.sortSubfileIds(e,he)(i[0].getFiles())),ue.updateFile(i[0])),n.length>0)if(n[0]instanceof J)e.files=e.files.filter(function(e){return e.getId()!=t}).sort(de.sortByName),e.currentFiles=e.currentFiles.filter(function(e){return e.getId()!=t}),ue.removeFile(t);else if(n[0]instanceof x){var r=n[0].getFiles();e.files=e.files.filter(function(e){return-1==r.indexOf(e.getId())&&e.getId()!=t}).sort(de.sortByName),e.currentFiles=e.currentFiles.filter(function(e){return-1==r.indexOf(e.getId())&&e.getId()!=t}),r.forEach(function(e){return ue.removeFile(e)}),ue.removeFile(t)}},setCurrentFileId:function(e,t){var n=e.currentFiles.filter(function(e){return e.getId()==t});n.length>0&&(e.currentFileId=t,e.currentPath=n[0].getLocation())},readFile:function(e,t){var n=e.currentFiles.filter(function(e){return e.getId()==t});if(0==n.length){var i=e.files.filter(function(e){return e._id==t}),r=0;if(e.currentFileId)r=e.currentFiles.map(function(e){return e.getId()}).indexOf(e.currentFileId);1==i.length&&(e.currentFiles.splice(r,0,i[0]),e.currentFileId=i[0].getId(),e.currentPath=i[0].getLocation())}else e.currentFileId=t,e.currentPath=n[0].getLocation()},renameFile:function(e,t){var n=t.file_id,i=t.name,r=e.files.map(function(e){return e._id==n&&(e.setName(i),ue.updateFile(e)),e});e.files=r},closeFile:function(e,t){e.currentFiles=e.currentFiles.filter(function(e){return e._id!=t})},insertLine:function(e,t){var n=t.indx,i=t.str,r=he.getCurrentFile(e,he);if(r){var s=r.getContent();s.splice(n,0,i),r.saveContent(s),ue.updateFile(r)}},editLine:function(e,t){var n=t.indx,i=t.str,r=he.getCurrentFile(e,he);if(r){var s=r.getContent();s.splice(n,1,i),r.saveContent(s),ue.updateFile(r)}},removeLine:function(e,t){var n=he.getCurrentFile(e,he);if(n){var i=n.getContent();i.splice(t,1),n.saveContent(i),ue.updateFile(n)}}},ge={state:{currentPath:"/",currentFileId:null,currentFiles:[],files:[]},getters:he,actions:{setFiles:function(e,t){e.state,(0,e.commit)("setFiles",t)},loadFiles:function(e){e.state,(0,e.commit)("loadFiles")},createFile:function(e,t){e.state,(0,e.commit)("createFile",t)},removeFile:function(e,t){e.state,(0,e.commit)("removeFile",t)},readFile:function(e,t){e.state,(0,e.commit)("readFile",t)},renameFile:function(e,t){e.state,(0,e.commit)("renameFile",{file_id:t.file_id,name:t.name})},setCurrentFileId:function(e,t){e.state,(0,e.commit)("setCurrentFileId",t)},closeFile:function(e,t){e.state,(0,e.commit)("closeFile",t)},insertLine:function(e,t){e.state,(0,e.commit)("insertLine",{indx:t.indx,str:t.str})},editLine:function(e,t){e.state,(0,e.commit)("editLine",{indx:t.indx,str:t.str})},removeLine:function(e,t){e.state,(0,e.commit)("removeLine",t)}},mutations:fe};i.a.use(se.a);var ve=new se.a.Store({modules:{filesystem:ge},strict:!1});i.a.config.productionTip=!1,i.a.use(ie.a),i.a.directive("on-click-outside",re.directive),new i.a({el:"#app",router:te,store:ve,components:{App:s},template:"<App/>"})},S0yu:function(e,t){},VD6W:function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),t("path",{attrs:{d:"M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z"}})])},toString:function(){return"/Users/m/Desktop/folder/VueJs/code-editor/src/assets/svg/add-folder.svg"}}},VMnz:function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),t("path",{attrs:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}})])},toString:function(){return"/Users/m/Desktop/folder/VueJs/code-editor/src/assets/svg/fullscreen.svg"}}},Zpd7:function(e,t){},c76p:function(e,t){},eJEf:function(e,t){},ieEG:function(e,t){},t8Mk:function(e,t){},ussS:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAQUlEQVRYw+3XwQkAAAhC0fZf2naoQKQfeH8XA0tSObO+C4CGAQBgFAARgNNHBCASQAsAAAAA4B/AO0zs0wzAe0ADT//Bk0D52fYAAAAASUVORK5CYII="}},["NHnr"]);
//# sourceMappingURL=app.118594c2d923b38992ac.js.map